{% extends "base.html" %}

{% block title %}å¤‡ä»½å’Œæ¢å¤ - åƒå¾—å¥½å¥½ï¼Œç¡å¾—é¥±é¥± - MIDI{% endblock %}

{% block content %}
<div class="content-wrapper">
    <h2>ğŸ”§ æ•°æ®å¤‡ä»½å’Œæ¢å¤</h2>

    <div class="backup-restore-container">
        <!-- Backup Section -->
        <div class="section">
            <h3>ğŸ“¦ å¤‡ä»½æ•°æ®</h3>
            <p>åˆ›å»ºåŒ…å«æ‰€æœ‰æ­Œæ›²å’Œæ–‡ä»¶çš„å®Œæ•´å¤‡ä»½ã€‚</p>
            <form action="{{ url_for('backup') }}" method="get">
                <button type="submit" class="btn btn-primary">ä¸‹è½½å¤‡ä»½</button>
            </form>
        </div>

        <!-- Restore Section -->
        <div class="section">
            <h3>ğŸ“¤ æ¢å¤æ•°æ®</h3>
            <div class="warning-box">
                <p><strong>âš ï¸ é‡è¦è­¦å‘Šï¼š</strong></p>
                <p>æ¢å¤æ“ä½œå°†<strong>å®Œå…¨åˆ é™¤</strong>å½“å‰çš„æ‰€æœ‰æ­Œæ›²å’Œæ–‡ä»¶ï¼Œå¹¶æ›¿æ¢ä¸ºå¤‡ä»½ä¸­çš„æ•°æ®ã€‚æ­¤æ“ä½œæ— æ³•æ’¤é”€ï¼</p>
            </div>

            <form action="{{ url_for('restore') }}" method="post" enctype="multipart/form-data" onsubmit="return confirmRestore()">
                <div class="form-group">
                    <label for="backup_file">é€‰æ‹©å¤‡ä»½æ–‡ä»¶ï¼š</label>
                    <input type="file" id="backup_file" name="backup_file" accept=".zip" required>
                </div>

                <div class="form-group">
                    <label>
                        <input type="checkbox" id="confirm_restore" name="confirm_restore" required>
                        æˆ‘ç¡®è®¤è¦åˆ é™¤æ‰€æœ‰ç°æœ‰æ•°æ®å¹¶æ¢å¤å¤‡ä»½
                    </label>
                </div>

                <button type="submit" class="btn btn-danger">æ¢å¤æ•°æ®</button>
            </form>
        </div>
    </div>
</div>

<style>
.content-wrapper {
    max-width: 800px;
    margin: 0 auto;
}

.backup-restore-container {
    display: grid;
    gap: 2rem;
    margin-top: 2rem;
}

.section {
    background: #f8f9fa;
    padding: 1.5rem;
    border-radius: 8px;
    border: 1px solid #dee2e6;
}

.section h3 {
    margin-top: 0;
    color: #333;
}

.warning-box {
    background: #fff3cd;
    border: 1px solid #ffeaa7;
    border-radius: 6px;
    padding: 1rem;
    margin: 1rem 0;
}

.warning-box p {
    margin: 0.5rem 0;
}

.form-group {
    margin: 1rem 0;
}

.form-group label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: 500;
}

.form-group input[type="file"] {
    width: 100%;
    padding: 0.5rem;
    border: 1px solid #ccc;
    border-radius: 4px;
}

.form-group input[type="checkbox"] {
    margin-right: 0.5rem;
}

.btn {
    padding: 0.75rem 1.5rem;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 1rem;
    text-decoration: none;
    display: inline-block;
}

.btn-primary {
    background: #007bff;
    color: white;
}

.btn-primary:hover {
    background: #0056b3;
}

.btn-danger {
    background: #dc3545;
    color: white;
}

.btn-danger:hover {
    background: #c82333;
}
</style>

<script>
function confirmRestore() {
    return confirm('âš ï¸ æœ€åç¡®è®¤ï¼šæ‚¨ç¡®å®šè¦åˆ é™¤æ‰€æœ‰ç°æœ‰æ•°æ®å¹¶æ¢å¤å¤‡ä»½å—ï¼Ÿæ­¤æ“ä½œæ— æ³•æ’¤é”€ï¼');
}
</script>
{% endblock %}